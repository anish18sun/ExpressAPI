<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Bootstrap Search Template</title>

        <!-- CSS -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,500,500i">
        <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="http://localhost:8000/assets/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="http://localhost:8000/assets/font-awesome/css/font-awesome.min.css">
        <link rel="stylesheet" href="http://localhost:8000/assets/css/animate.css">
        <link rel="stylesheet" href="http://localhost:8000/assets/css/style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
        <script src="http://localhost:8000/assets/js/jquery-1.11.1.min.js"></script>
        <script src="http://localhost:8000/assets/bootstrap/js/bootstrap.min.js"></script>
        <script src="http://localhost:8000/assets/js/jquery.backstretch.min.js"></script>
        <script src="http://localhost:8000/assets/js/wow.min.js"></script>
        <script src="http://localhost:8000/assets/js/scripts.js"></script>
        <script src="http://localhost:8000/assets/js/salvattore.js"></script>


        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <!-- Favicon and touch icons -->
        
<script>
    $(document).ready(function()
    {
        
        

        function createCard(data) {
                var imageUrl = 'http://localhost:8000/imageassets/'+data;
                var cardTemplate = $("#templates").find(".box").clone();
                
                
                cardTemplate.find("img").attr("src", imageUrl);
                $("#grid").append(cardTemplate);
            }
        
$("#first").on('click',function(e)
{

     e.preventDefault();



var search = $("#mysearch").val();
var res = search.split(",");
    var joined =res.join(" ");
    $("#grid").html("");
    $(".search-button").html("");



$.ajax({
    dataType:'text',

        url:'http://localhost:8000/images',
        method:'GET',
         contentType:'text/html',
        data : {
          "tags":joined
        },
        success : function(result) {
            
            
            //console.log(result);
        document.getElementById('mycontent').style.display = 'none';




         var src1= result.split(",");
         for (var i = 0, j = src1.length; i < j; i++){

            createCard(src1[i]);    
        

     }


$("#more").removeAttr("disabled");
     

    },
     error: function (e) {
                      console.log(e);
                      alert(e);

                    }
      });
});
$('#more').on('click',function (e) {
    e.preventDefault();
    var search = $("#mysearch").val();
var res = search.split(",");
    var joined =res.join(" ");
     $("#grid").html("");

    $.ajax({
                    dataType: 'text',
                    url: "http://localhost:8000/more",
                    method: "GET",
                    contentType: 'text/html',
                    data :{
                        "tags":joined
                    },
                    success: function (data) {
                        
                         var src1= data.split(",");
                         console.log(src1);
         for (var i = 0, j = src1.length; i < j; i++){

            createCard(src1[i]);    
         // $('#gallery-overlay').append('<div class ="item"><img src=http://localhost:8000/imageassets/'+src1[i]+'/></div>');
     }
                    },
                    error: function (e) {
                        console.log(e);

                    },
                    complete: function(){

                    }
                });
});

   
   

    });
</script>


    </head>

    <body>
        <nav class="navbar navbar-inverse" role="navigation">
            <div class="container">
                <div class="navbar-header wow fadeIn">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#top-navbar-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html">Bootstrap Search Template</a>
                </div>
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="top-navbar-1">
                    <ul class="nav navbar-nav navbar-right navbar-search-button">
                        <li><a class="search-button" href="#"><i class="fa fa-search"></i></a></li>
                    </ul>
                    <form  id="myform" class="navbar-form navbar-search-form disabled wow fadeInLeft" role="form" method="post" enctype="multipart/form-data" >

                        <div class="search">

    
      <input type="text" id ="mysearch" placeholder="What are you looking for?">

      
      <button id="first" style="background: #C0D9D9;color: black;font-weight: normal;float: left;margin-top: 5px;">
       Search
     </button>
    
   
           <button id ="more" disabled="disabled" style="background: #C0D9D9;color: black;font-weight: normal;float: left;margin-left:10px;margin-top:5px;">More Similar Image </button>  
           </form>           
 

</disv>
                
                    
                    <ul class="nav navbar-nav navbar-right navbar-menu-items wow fadeIn">
                        <li><a href="#">Home</a></li>
                        
                        
                        
                    </ul>
                </div>
            </div>
        </nav>


        <div id="templates" hidden>
    <div class="card-template">
        

            
<div class="box">
           

                <img class="img-responsive" />
            

            </div>

        

    </div>
</div>


  <div id="grid" data-columns>
    

        </div>
    


        
        <!-- Top menu -->
        

        <!-- Top content -->
        <div id="mycontent">
        <div class="top-content">
            <div class="container">
                
                <div class="row">
                    <div class="col-sm-12 text wow fadeInLeft">
                        <h1>Image <strong>Search</strong> WebApp</h1>
                        <div class="description">
                            <p class="medium-paragraph">
                            Click on the search bar to search images and enjoy!
                            </p>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
        
        <!-- Features -->
        <div class="features-container section-container">
            <div class="container">
                
                <div class="row">
                    <div class="col-sm-12 features section-description wow fadeIn">
                        <h2>ABOUT</h2>
                        <div class="divider-1 wow fadeInUp"><span></span></div>
                    </div>
                </div>
                
               
                    <div class="col-sm-6 features-box wow fadeInLeft">
                        
                            
                            <div class="col-sm-12">
                                <h3>Image Searching</h3>
                                <p>
                                    Search images on the sever by using any tag!
                                </p>
                            </div>
                        
                    </div>
                    </div>
                </div>
            </br>
</div>
                
                
               

        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-sm-12 footer-copyright" style="font-weight: normal;">
                         Done By Interns at Dailyhunt!!!!
                    </div>
                </div>
            </div>
        </footer>



        <!-- Javascript -->
        
        
        <!--[if lt IE 10]>
            <script src="assets/js/placeholder.js"></script>
        <![endif]-->

    </body>

</html>